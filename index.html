<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ë‚˜ëŠ” ì–´ë–¤ HRBPì¼ê¹Œ?</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Pretendard',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:linear-gradient(160deg,#FAFBFF 0%,#F0EDFF 40%,#E8F4FD 70%,#FFF5F2 100%);min-height:100vh;color:#1A1A2E}
.wrap{display:flex;flex-direction:column;align-items:center;padding:20px;min-height:100vh}
.container{max-width:540px;width:100%}
.card{background:#fff;border-radius:20px;padding:24px;box-shadow:0 4px 20px rgba(0,0,0,.05);margin-bottom:16px}
.card-bordered{border:2px solid var(--c)}
.sec-title{font-size:13px;font-weight:700;color:#9CA3AF;letter-spacing:.5px;margin-bottom:14px;text-transform:uppercase}
.tag{font-size:13px;padding:7px 12px;border-radius:10px;display:inline-block;margin:0 6px 6px 0}
.tag-green{background:#F0FDF4;color:#166534;border:1px solid #BBF7D0}
.tag-red{background:#FEF2F2;color:#991B1B;border:1px solid #FECACA}
.btn{width:100%;padding:16px;font-size:15px;font-weight:700;border:none;border-radius:14px;cursor:pointer;transition:all .2s;font-family:inherit}
.btn-primary{color:#fff;background:linear-gradient(135deg,#6C5CE7,#0984E3);box-shadow:0 4px 16px rgba(108,92,231,.3)}
.btn-secondary{color:#6C5CE7;background:#fff;border:2px solid #E5E7EB}
.btn:active{transform:scale(.98)}
.input{width:100%;padding:12px 14px;font-size:14px;border:2px solid #E5E7EB;border-radius:12px;outline:none;font-family:inherit;transition:border .2s}
.input:focus{border-color:#6C5CE7}
.fade-in{opacity:0;transform:translateY(16px);animation:fadeUp .6s cubic-bezier(.16,1,.3,1) forwards}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
.hidden{display:none!important}

/* Chart */
.chart-wrap{position:relative;width:100%;padding-bottom:100%;max-width:300px;margin:0 auto;background:#F9FAFB;border-radius:16px;overflow:hidden}
.chart-wrap .axis-h{position:absolute;top:50%;left:0;right:0;height:1px;background:#E5E7EB}
.chart-wrap .axis-v{position:absolute;left:50%;top:0;bottom:0;width:1px;background:#E5E7EB}
.chart-label{position:absolute;font-size:10px;font-weight:600;color:#9CA3AF}
.chart-quad{position:absolute;font-size:10px;font-weight:600;text-align:center;opacity:.4}
.dot{position:absolute;transform:translate(-50%,-50%);z-index:10;display:flex;flex-direction:column;align-items:center}
.dot-circle{width:14px;height:14px;border-radius:50%}
.dot-name{font-size:9px;font-weight:700;margin-top:3px;background:#fff;padding:1px 5px;border-radius:4px;box-shadow:0 1px 4px rgba(0,0,0,.1);white-space:nowrap}

/* Scale buttons */
.scale-row{display:flex;align-items:center;justify-content:center;gap:0;padding:12px 0}
.scale-btn{border-radius:50%;border:3px solid #E5E7EB;cursor:pointer;transition:all .15s;background:#F3F4F6;flex-shrink:0}
.scale-btn:hover{transform:scale(1.1)}
.scale-btn.selected{transform:scale(1.15)}
.scale-label{font-size:10px;margin-top:6px;color:#9CA3AF;text-align:center;font-weight:400}
.scale-col{display:flex;flex-direction:column;align-items:center;flex:1}

/* Responsive */
@media(max-width:400px){.card{padding:18px}.container{padding:0 4px}}
</style>
</head>
<body>
<div class="wrap">
<div class="container" id="app"></div>
</div>

<script>
/* ===== DATA ===== */
const QUESTIONS = [
  // SE axis (Strategy- / Execution+)
  {axis:"SE",rev:false,text:"ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ê°€ ì‹œì‘ëì„ ë•Œ, ë‚˜ëŠ” ë¨¼ì €...",a:"ì´ í”„ë¡œì íŠ¸ì˜ ë°©í–¥ê³¼ ëª©ì ë¶€í„° ì •ë¦¬í•œë‹¤",b:"ì‹¤í–‰ ê³„íšê³¼ ì¼ì •ë¶€í„° ì§ ë‹¤"},
  {axis:"SE",rev:false,text:"ë‹´ë‹¹ ì¡°ì§ì—ì„œ ê°‘ìê¸° ì´ìŠˆê°€ í„°ì¡Œì„ ë•Œ...",a:"ê·¼ë³¸ ì›ì¸ê³¼ êµ¬ì¡°ì  ë¬¸ì œë¥¼ ë¨¼ì € íŒŒì•…í•œë‹¤",b:"ë‹¹ì¥ í•´ê²° ê°€ëŠ¥í•œ ê²ƒë¶€í„° ë¹ ë¥´ê²Œ ì²˜ë¦¬í•œë‹¤"},
  {axis:"SE",rev:true,text:"íŒ€ íšŒì˜ì—ì„œ ë” ì§‘ì¤‘í•˜ê²Œ ë˜ëŠ” ì•ˆê±´ì€?",a:"ì´ë²ˆ ì£¼ ê°ì í•  ì¼ê³¼ ì§„í–‰ ìƒí™© ì²´í¬",b:"ìš°ë¦¬ íŒ€ì˜ ì¤‘ì¥ê¸° ë°©í–¥ì„±ê³¼ ì—­í•  ë…¼ì˜"},
  {axis:"SE",rev:false,text:"'ì˜¤ëŠ˜ ì¼ì„ ì˜ í–ˆë‹¤'ê³  ëŠë¼ëŠ” ìˆœê°„ì€?",a:"ìƒˆë¡œìš´ ê´€ì ì´ë‚˜ í•´ê²° í”„ë ˆì„ì„ ì œì‹œí–ˆì„ ë•Œ",b:"ê³„íší•œ ì¼ì„ ì°¨ì§ˆ ì—†ì´ ë§ˆë¬´ë¦¬í–ˆì„ ë•Œ"},
  {axis:"SE",rev:true,text:"ë³´ê³ ì„œë¥¼ ì“¸ ë•Œ ë¨¼ì € ì†ì´ ê°€ëŠ” ê±´?",a:"ë°ì´í„° ìˆ˜ì§‘ê³¼ íŒ©íŠ¸ ì •ë¦¬ë¶€í„°",b:"ì „ì²´ ë©”ì‹œì§€ì™€ ìŠ¤í† ë¦¬ë¼ì¸ êµ¬ì„±ë¶€í„°"},
  {axis:"SE",rev:false,text:"ìƒì‚¬ì—ê²Œ ë³´ê³ í•  ë•Œ ë” ìì—°ìŠ¤ëŸ¬ìš´ ë°©ì‹ì€?",a:"'ì™œ(Why)' ì´ê±¸ í•´ì•¼ í•˜ëŠ”ì§€ ë§¥ë½ ì¤‘ì‹¬ìœ¼ë¡œ",b:"'ë¬´ì—‡(What)'ì„ í–ˆê³  ì–´ë””ê¹Œì§€ ëëŠ”ì§€ ì¤‘ì‹¬ìœ¼ë¡œ"},
  {axis:"SE",rev:true,text:"ì—…ë¬´ ê´€ë ¨ ì„¸ë¯¸ë‚˜ë¥¼ ê³ ë¥¸ë‹¤ë©´?",a:"ì‹¤ë¬´ ë…¸í•˜ìš°, ìµœì‹  íˆ´ í™œìš©ë²•",b:"ê²½ì˜ ì „ëµ, ì¡°ì§ ì„¤ê³„ íŠ¸ë Œë“œ"},
  {axis:"SE",rev:false,text:"í›„ë°°ê°€ ê³ ë¯¼ ìƒë‹´ì„ í•˜ë©´ ì£¼ë¡œ í•´ì£¼ëŠ” ë§ì€?",a:"í•œ ë°œ ë¬¼ëŸ¬ì„œì„œ í° ê·¸ë¦¼ì„ ë¨¼ì € ê·¸ë ¤ë´",b:"ì¼ë‹¨ í•  ìˆ˜ ìˆëŠ” ê²ƒë¶€í„° í•˜ë‚˜ì”© ì‹œì‘í•´ë´"},
  // PT axis (People- / Task+)
  {axis:"PT",rev:false,text:"BP ì—­í• ì—ì„œ ê°€ì¥ ë³´ëŒì„ ëŠë¼ëŠ” ìˆœê°„ì€?",a:"êµ¬ì„±ì›ì´ ì„±ì¥í•˜ê±°ë‚˜ ì¡°ì§ ë¶„ìœ„ê¸°ê°€ ì¢‹ì•„ì§ˆ ë•Œ",b:"í”„ë¡œì„¸ìŠ¤ê°€ ê°œì„ ë˜ê³  íš¨ìœ¨ì´ ëˆˆì— ë„ê²Œ ì˜¬ë¼ê°ˆ ë•Œ"},
  {axis:"PT",rev:true,text:"ì¡°ì§ ë³€í™”ë¥¼ ì¶”ì§„í•  ë•Œ ë¨¼ì € í•˜ëŠ” ê²ƒì€?",a:"ë³€í™”ì˜ í•„ìš”ì„±ê³¼ ë…¼ë¦¬ì  ê·¼ê±°ë¥¼ ì •ë¦¬í•œë‹¤",b:"êµ¬ì„±ì›ë“¤ì´ ì–´ë–»ê²Œ ë°›ì•„ë“¤ì¼ì§€ ë°˜ì‘ì„ ì‚´í•€ë‹¤"},
  {axis:"PT",rev:false,text:"ì±„ìš© ë©´ì ‘ì—ì„œ ë” ì‹ ê²½ ì“°ì´ëŠ” ê±´?",a:"ì´ ì‚¬ëŒì´ ìš°ë¦¬ íŒ€ê³¼ ì˜ ì–´ìš¸ë¦´ ìˆ˜ ìˆì„ì§€",b:"ì´ ì‚¬ëŒì´ ì‹¤ì œ ì—…ë¬´ë¥¼ ì˜ í•´ë‚¼ ìˆ˜ ìˆì„ì§€"},
  {axis:"PT",rev:false,text:"í˜„ì—… ë¦¬ë”ì™€ ë¯¸íŒ…í•  ë•Œ ë‚˜ëŠ”...",a:"ë¦¬ë”ì˜ ê³ ë¯¼ê³¼ ë§¥ë½ì„ ë¨¼ì € ì¶©ë¶„íˆ ë“£ëŠ”ë‹¤",b:"ë°ì´í„°ì™€ í˜„í™©ì„ ë¨¼ì € ê³µìœ í•˜ê³  ë…¼ì˜ë¥¼ ì‹œì‘í•œë‹¤"},
  {axis:"PT",rev:true,text:"ì—…ë¬´ ì¤‘ ê°€ì¥ ì˜ë¯¸ìˆê²Œ ëŠë¼ëŠ” ì‹œê°„ì€?",a:"í˜¼ì ì§‘ì¤‘í•´ì„œ ì—…ë¬´ë¥¼ ê¹Šì´ ì²˜ë¦¬í•˜ëŠ” ì‹œê°„",b:"ì‚¬ëŒë“¤ê³¼ ëŒ€í™”í•˜ë©° ê´€ê³„ë¥¼ ìŒ“ëŠ” ì‹œê°„"},
  {axis:"PT",rev:false,text:"ë™ë£Œê°€ ì—…ë¬´ë¡œ í˜ë“¤ì–´í•  ë•Œ ë‚˜ëŠ”...",a:"ë¨¼ì € ë‹¤ê°€ê°€ì„œ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ì¤€ë‹¤",b:"ë„ì›€ì´ ë  ë§Œí•œ í•´ê²°ì±…ì´ë‚˜ ìë£Œë¥¼ ì°¾ì•„ì¤€ë‹¤"},
  {axis:"PT",rev:true,text:"í”„ë¡œì íŠ¸ ì„±ê³µì˜ í•µì‹¬ì€ ë¬´ì—‡ì´ë¼ê³  ìƒê°í•´?",a:"ì²´ê³„ì ì¸ í”„ë¡œì„¸ìŠ¤ì™€ ëª…í™•í•œ ê¸°ì¤€",b:"êµ¬ì„±ì›ë“¤ì˜ ëª°ì…ê³¼ ë™ê¸°ë¶€ì—¬"},
  {axis:"PT",rev:false,text:"íŒ€ì—ì„œ ë‚´ ì—­í• ì´ ì¸ì •ë°›ì„ ë•Œ ë” ë¿Œë“¯í•œ ê±´?",a:"ì‚¬ëŒë“¤ì´ ë‚˜ë¥¼ ë¯¿ê³  ì˜ì§€í•  ë•Œ",b:"ë‚´ê°€ ë§Œë“  ê²°ê³¼ë¬¼ì´ë‚˜ ì‹œìŠ¤í…œì´ ì˜ ì‘ë™í•  ë•Œ"},
];

const STRENGTH_QUESTIONS = [
  {id:"SQ1",text:"ë™ë£Œë“¤ì´ ë‚˜ì—ê²Œ ê°€ì¥ ìì£¼ ë„ì›€ì„ ìš”ì²­í•˜ëŠ” ì˜ì—­ì€?",
    opts:[
      {v:"strategy",label:"ë°©í–¥ ì„¤ì •Â·ì˜ì‚¬ê²°ì • ì¡°ì–¸"},
      {v:"system",label:"í”„ë¡œì„¸ìŠ¤ ì„¤ê³„Â·ë°ì´í„° ë¶„ì„"},
      {v:"people",label:"ì†Œí†µ ì¤‘ì¬Â·ê´€ê³„ ì¡°ìœ¨"},
      {v:"execution",label:"ì‹¤í–‰ ê³„íšÂ·ì¼ì • ê´€ë¦¬"}
    ]},
  {id:"SQ2",text:"ìµœê·¼ ê°€ì¥ ì¢‹ì€ ì„±ê³¼ë¥¼ ë‚¸ ì—…ë¬´ì˜ ì„±ê²©ì€?",
    opts:[
      {v:"strategy",label:"ìƒˆë¡œìš´ ë°©í–¥Â·í”„ë ˆì„ ì œì‹œ"},
      {v:"system",label:"ì‹œìŠ¤í…œÂ·ì œë„ êµ¬ì¶•"},
      {v:"people",label:"ê´€ê³„ ê°œì„ Â·ì¡°ì§ ë¶„ìœ„ê¸° ë³€í™”"},
      {v:"execution",label:"ì •í™•í•˜ê³  ë¹ ë¥¸ ì—…ë¬´ ì²˜ë¦¬"}
    ]},
  {id:"SQ3",text:"ë‚´ê°€ ì—†ìœ¼ë©´ íŒ€ì—ì„œ ê°€ì¥ ë¹ ì§€ëŠ” ì—­í• ì€?",
    opts:[
      {v:"strategy",label:"í° ê·¸ë¦¼ì„ ê·¸ë¦¬ê³  ë°©í–¥ì„ ì¡ëŠ” ì—­í• "},
      {v:"system",label:"ì²´ê³„ë¥¼ ë§Œë“¤ê³  ê¸°ì¤€ì„ ì„¸ìš°ëŠ” ì—­í• "},
      {v:"people",label:"ì‚¬ëŒë“¤ì„ ì—°ê²°í•˜ê³  ë¶„ìœ„ê¸°ë¥¼ ì¡ëŠ” ì—­í• "},
      {v:"execution",label:"ì¼ì„ í™•ì‹¤í•˜ê²Œ ë§ˆë¬´ë¦¬í•˜ëŠ” ì—­í• "}
    ]},
  {id:"SQ4",text:"ë‚´ê°€ ë¦¬ë“œí–ˆì„ ë•Œ ê°€ì¥ ê²°ê³¼ê°€ ì¢‹ì•˜ë˜ ìƒí™©ì€?",
    opts:[
      {v:"strategy",label:"ë¶ˆí™•ì‹¤í•œ ìƒí™©ì—ì„œ ë°©í–¥ì„ ì •í•´ì•¼ í–ˆì„ ë•Œ"},
      {v:"system",label:"ë³µì¡í•œ ê²ƒì„ ì •ë¦¬Â·êµ¬ì¡°í™”í•´ì•¼ í–ˆì„ ë•Œ"},
      {v:"people",label:"ê°ˆë“±ì´ë‚˜ ì†Œí†µ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í–ˆì„ ë•Œ"},
      {v:"execution",label:"í•œì •ëœ ì‹œê°„ ì•ˆì— ê²°ê³¼ë¥¼ ë‚´ì•¼ í–ˆì„ ë•Œ"}
    ]}
];

const T = {
  architect:{name:"ì¡°ì§ ì„¤ê³„ì",emoji:"ğŸ›ï¸",code:"A",
    subtitle:"í° ê·¸ë¦¼ì„ ê·¸ë¦¬ë©° ì‚¬ëŒì˜ ë§ˆìŒì„ ì›€ì§ì´ëŠ” BP",
    color:"#6C5CE7",colorLight:"#A29BFE",colorBg:"#F3F0FF",
    desc:"ì¡°ì§ì˜ ë°©í–¥ì„±ê³¼ êµ¬ì„±ì›ì˜ ì„±ì¥ì„ ë™ì‹œì— ë³´ëŠ” ì‹œì•¼ë¥¼ ê°€ì§€ê³  ìˆì–´ìš”. 'ì™œ ì´ ì¼ì„ í•´ì•¼ í•˜ëŠ”ì§€'ë¥¼ ë¨¼ì € ìƒê°í•˜ê³ , ì‚¬ëŒ ì¤‘ì‹¬ìœ¼ë¡œ ë³€í™”ë¥¼ ì´ëŒì–´ê°€ëŠ” ê±¸ ì¢‹ì•„í•´ìš”.",
    tendency:["ì¡°ì§ ì´ìŠˆì˜ ë³¸ì§ˆì„ ê¿°ëš«ì–´ ë³´ë ¤ëŠ” ê²½í–¥","ì‚¬ëŒì˜ ë™ê¸°ì™€ ë‹ˆì¦ˆë¥¼ ë¨¼ì € ì½ìœ¼ë ¤ í•¨","ë³€í™”ì˜ í° ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ” ë° ì—ë„ˆì§€ë¥¼ ìŸìŒ","ë‹¤ì–‘í•œ ì´í•´ê´€ê³„ë¥¼ ì¡°ìœ¨í•˜ë©° ë°©í–¥ì„ ì¡ìœ¼ë ¤ í•¨"],
    caution:["ì„¸ë¶€ ì‹¤í–‰ ê³„íšì´ ë¶€ì‹¤í•  ìˆ˜ ìˆìŒ","í˜„ì‹¤ì  ì œì•½ì„ ê³¼ì†Œí‰ê°€í•˜ëŠ” ê²½í–¥","ì•„ì´ë””ì–´ê°€ ë§ì•„ ì§‘ì¤‘ì´ ë¶„ì‚°ë  ìˆ˜ ìˆìŒ","'ì¢‹ì€ ë°©í–¥'ì— ëª°ë‘í•´ ì†ë„ê°€ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆìŒ"],
    energyUp:["ì±„ìš© ë¸Œëœë”© ì „ëµ ê¸°íš","ì¡°ì§ë¬¸í™” ì§„ë‹¨ ë° ê°œì„  ì„¤ê³„","ë¦¬ë” ì½”ì¹­Â·ì´í•´ê´€ê³„ì ì„¤ë“","ì¸ì¬ ìœ¡ì„± ë¡œë“œë§µ ìˆ˜ë¦½","ì¡°ì§ ê°œí¸Â·ë³€í™” ê´€ë¦¬ ì„¤ê³„"],
    energyDown:["ë°˜ë³µì ì¸ ì„œë¥˜ ì²˜ë¦¬Â·ë°ì´í„° ì…ë ¥","ë‹¨ìˆœ ì¼ì • ì¡°ìœ¨Â·í–‰ì • ì—…ë¬´","ì •í•´ì§„ í‹€ëŒ€ë¡œë§Œ ì‹¤í–‰í•˜ëŠ” ìš´ì˜ ì—…ë¬´","ë””í…Œì¼í•œ ìˆ«ì ê²€ì¦Â·ë¦¬í¬íŠ¸ í¬ë§·íŒ…"],
    manual:{
      request:"ì¼ì˜ ë°°ê²½ê³¼ 'ì™œ ì´ê±¸ í•´ì•¼ í•˜ëŠ”ì§€'ë¥¼ ë¨¼ì € ì„¤ëª…í•´ì£¼ì„¸ìš”. ì˜ë¯¸ë¥¼ ëŠê»´ì•¼ ì—ë„ˆì§€ê°€ ë‚˜ëŠ” íƒ€ì…ì´ì—ìš”.",
      feedback:"ë°©í–¥ì„±ì— ëŒ€í•œ í”¼ë“œë°±ì„ ë¨¼ì € ì£¼ê³ , ë””í…Œì¼ì€ ê·¸ ë‹¤ìŒì— ì´ì•¼ê¸°í•´ì£¼ì„¸ìš”.",
      avoid:"ë§¥ë½ ì—†ì´ 'ì´ê±° í•´ì£¼ì„¸ìš”'ë¼ê³ ë§Œ ë˜ì§€ê¸°. ì‹¤í–‰ ë””í…Œì¼ë¶€í„° ì§€ì í•˜ê¸°.",
      stress:"íšŒì˜ì—ì„œ ì ì  ë” ì¶”ìƒì ì¸ ì´ì•¼ê¸°ë§Œ í•˜ê³ , ì‹¤í–‰ ë…¼ì˜ë¥¼ ê³„ì† ë¯¸ë£¨ê¸° ì‹œì‘í•´ìš”."
    },
    recovery:"ì¡°ìš©íˆ ìƒê°ì„ ì •ë¦¬í•  ì‹œê°„ì„ ì£¼ê³ , ì‹ ë¢°í•˜ëŠ” ì‚¬ëŒê³¼ 1:1ë¡œ ê³ ë¯¼ì„ ë‚˜ëˆŒ ìˆ˜ ìˆê²Œ í•´ì£¼ì„¸ìš”. í° ê·¸ë¦¼ì„ ë‹¤ì‹œ ê·¸ë¦´ ìˆ˜ ìˆìœ¼ë©´ íšŒë³µë¼ìš”.",
    bestMatch:"driver",bestReason:"ì„¤ê³„ìì˜ ë°©í–¥ ì œì‹œ + ë“œë¼ì´ë²„ì˜ ì¶”ì§„ë ¥ â†’ 'ê¸°íšâ†’ì‹¤í–‰'ì´ ë§¤ë„ëŸ½ê²Œ ì´ì–´ì ¸ìš”.",
    tensionMatch:"builder",tensionReason:"ë‘˜ ë‹¤ ì „ëµì ì´ì§€ë§Œ, ì‚¬ëŒ vs ì‹œìŠ¤í…œ ê´€ì  ì°¨ì´ë¡œ ìš°ì„ ìˆœìœ„ ì¶©ëŒ ê°€ëŠ¥. ì„œë¡œì˜ ê´€ì ì„ 'ë³´ì™„'ìœ¼ë¡œ ì¸ì •í•˜ë©´ ìµœê°• ì¡°í•©."
  },
  builder:{name:"ì‹œìŠ¤í…œ ë¹Œë”",emoji:"âš™ï¸",code:"B",
    subtitle:"ì œë„ì™€ í”„ë¡œì„¸ìŠ¤ë¡œ ì¡°ì§ì„ ì²´ê³„í™”í•˜ëŠ” BP",
    color:"#0984E3",colorLight:"#74B9FF",colorBg:"#EBF5FF",
    desc:"ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ì¸ ì‚¬ê³ ë¥¼ ë°”íƒ•ìœ¼ë¡œ êµ¬ì¡°ì™€ ì‹œìŠ¤í…œì„ ì„¤ê³„í•˜ëŠ” ê±¸ ì¢‹ì•„í•´ìš”. ë°ì´í„°ë¥¼ ê·¼ê±°ë¡œ ì˜ì‚¬ê²°ì •í•˜ê³ , ë°˜ë³µ ê°€ëŠ¥í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì„±ê³¼ë¥¼ ë‚´ëŠ” ë° ê°•ì ì´ ìˆì–´ìš”.",
    tendency:["ë³µì¡í•œ ë¬¸ì œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ êµ¬ì¡°í™”í•˜ë ¤ëŠ” ê²½í–¥","ë°ì´í„° ê¸°ë°˜ì˜ ê°ê´€ì  íŒë‹¨ì„ ì„ í˜¸í•¨","ì§€ì† ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì„ ì„¤ê³„í•˜ëŠ” ë° ì—ë„ˆì§€ë¥¼ ìŸìŒ","ë¬¸ì„œí™”Â·í‘œì¤€í™”ë¥¼ í†µí•´ ì§€ì‹ì„ ì¶•ì í•˜ë ¤ í•¨"],
    caution:["ì‚¬ëŒì˜ ê°ì •Â·ë§¥ë½ì„ ë†“ì¹  ìˆ˜ ìˆìŒ","ì™„ë²½ì£¼ì˜ë¡œ ì¼ì •ì´ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆìŒ","'ìµœì í™”'ì— ì§‘ì°©í•´ ìœ ì—°ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŒ","ì‹œìŠ¤í…œì´ ì¤€ë¹„ë  ë•Œê¹Œì§€ ì‹¤í–‰ì„ ë¯¸ë£° ìˆ˜ ìˆìŒ"],
    energyUp:["í‰ê°€Â·ë³´ìƒ ì²´ê³„ ì„¤ê³„","HR ëŒ€ì‹œë³´ë“œÂ·ë°ì´í„° ë¶„ì„","ì±„ìš© í”„ë¡œì„¸ìŠ¤ êµ¬ì¡°í™”Â·ìë™í™”","ì¸ì‚¬ ì œë„ ê¸°íš ë° ê°œì„ ","ì—…ë¬´ ë§¤ë‰´ì–¼Â·ê°€ì´ë“œ ë¬¸ì„œí™”"],
    energyDown:["ê°ì •ì  ê°ˆë“± ì¤‘ì¬Â·ì¡°ìœ¨","ë¹ˆë²ˆí•œ 1:1 ì •ì„œì  ì¼€ì–´","êµ¬ì¡° ì—†ì´ ì¦‰í¥ì ìœ¼ë¡œ ë°”ë€ŒëŠ” ìš”ì²­","ê²°ë¡  ì—†ì´ ë…¼ì˜ë§Œ ê¸¸ì–´ì§€ëŠ” íšŒì˜"],
    manual:{
      request:"ë°ì´í„°ì™€ ë…¼ë¦¬ë¡œ ì„¤ëª…í•˜ê³ , ì¶©ë¶„í•œ ê²€í†  ì‹œê°„ì„ ì£¼ì„¸ìš”. 'ì´ëŸ° ê·¼ê±°ê°€ ìˆì–´, ì–´ë–»ê²Œ ìƒê°í•´?'ê°€ íš¨ê³¼ì ì´ì—ìš”.",
      feedback:"êµ¬ì²´ì ì¸ ì‚¬ì‹¤ê³¼ ê¸°ì¤€ì„ ê·¼ê±°ë¡œ í”¼ë“œë°±í•´ì£¼ì„¸ìš”. ê°ì •ë³´ë‹¤ ë…¼ë¦¬ì— ë°˜ì‘í•˜ëŠ” íƒ€ì…ì´ì—ìš”.",
      avoid:"ê¸‰í•˜ê²Œ 'ì¼ë‹¨ í•´'ë¼ê³  ë°€ì–´ë¶™ì´ê¸°. ê·¼ê±° ì—†ì´ ë°©í–¥ì„ ë°”ê¾¸ê¸°.",
      stress:"ì‚¬ì†Œí•œ ê²ƒê¹Œì§€ í†µì œí•˜ë ¤ í•˜ê³ , ì†Œí†µì„ ì¤„ì´ë©´ì„œ í˜¼ì ì¼í•˜ê¸° ì‹œì‘í•´ìš”."
    },
    recovery:"ë³µì¡í•œ ë¬¸ì œë¥¼ ì •ë¦¬í•  ì¡°ìš©í•œ ì‹œê°„ì„ ì£¼ê³ , ëª…í™•í•œ ìš°ì„ ìˆœìœ„ë¥¼ í•¨ê»˜ ì •í•´ì£¼ì„¸ìš”. 'ì „ë¶€ ë‹¤ ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ë¼'ë¼ëŠ” ë©”ì‹œì§€ê°€ ë„ì›€ë¼ìš”.",
    bestMatch:"connector",bestReason:"ë¹Œë”ì˜ ì²´ê³„ + ì»¤ë„¥í„°ì˜ í˜„ì¥ê° â†’ 'ì œë„ëŠ” ìˆëŠ”ë° í˜„ì¥ì—ì„œ ì•ˆ ëŒì•„ê°€ëŠ”' ë¬¸ì œë¥¼ ì˜ˆë°©í•´ìš”.",
    tensionMatch:"architect",tensionReason:"ë‘˜ ë‹¤ ì „ëµì ì´ì§€ë§Œ ì ‘ê·¼ì´ ë‹¬ë¼ìš”. ì„¤ê³„ìëŠ” ì‚¬ëŒ ì¤‘ì‹¬, ë¹Œë”ëŠ” ì‹œìŠ¤í…œ ì¤‘ì‹¬. ì´ˆë°˜ì— ë°©í–¥ ë§ì¶”ë©´ ê°•ë ¥í•œ ì¡°í•©."
  },
  connector:{name:"í”¼í”Œ ì»¤ë„¥í„°",emoji:"ğŸ¤",code:"C",
    subtitle:"í˜„ì¥ì—ì„œ ì‚¬ëŒê³¼ í•¨ê»˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” BP",
    color:"#E17055",colorLight:"#FAB1A0",colorBg:"#FFF5F2",
    desc:"ì‚¬ëŒê³¼ì˜ ê´€ê³„ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ê³ , í˜„ì¥ì˜ ëª©ì†Œë¦¬ë¥¼ ë¹ ë¥´ê²Œ ì½ì–´ë‚´ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ìš”. êµ¬ì„±ì›ì˜ ë‹ˆì¦ˆë¥¼ ë¨¼ì € íŒŒì•…í•˜ê³ , ì‹ ë¢°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•´ë‚˜ê°€ìš”.",
    tendency:["ë¹ ë¥¸ ê´€ê³„ í˜•ì„±ê³¼ ì‹ ë¢° êµ¬ì¶•ì— ëŠ¥í•œ ê²½í–¥","í˜„ì¥ ì´ìŠˆë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€í•˜ë ¤ í•¨","êµ¬ì„±ì›ì˜ ìˆ¨ì€ ë‹ˆì¦ˆë¥¼ í¬ì°©í•˜ëŠ” ê³µê° ëŠ¥ë ¥ì„ ìì£¼ ë°œíœ˜","ë¶„ìœ„ê¸° ë©”ì´í‚¹ê³¼ ì†Œí†µ ì´‰ì§„ì— ì—ë„ˆì§€ë¥¼ ìŸìŒ"],
    caution:["ê±°ì ˆì´ ì–´ë ¤ì›Œ ì—…ë¬´ê°€ ê³¼ì¤‘ë  ìˆ˜ ìˆìŒ","ê°ì •ì— íœ˜ë§ë ¤ ê°ê´€ì  íŒë‹¨ì´ íë ¤ì§ˆ ìˆ˜ ìˆìŒ","ì „ëµì  ìš°ì„ ìˆœìœ„ íŒë‹¨ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ","ì²´ê³„ì  ê¸°ë¡Â·ë¬¸ì„œí™”ê°€ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ"],
    energyUp:["êµ¬ì„±ì› ìƒë‹´Â·ê³ ì¶© ì²˜ë¦¬","í˜„ì—… ë¦¬ë” íŒŒíŠ¸ë„ˆì‹­ êµ¬ì¶•","ì‹ ê·œ ì…ì‚¬ì ì˜¨ë³´ë”© ì„¤ê³„Â·ì§€ì›","íŒ€ë¹Œë”©Â·ì›Œí¬ìˆ ê¸°íš ë° í¼ì‹¤ë¦¬í…Œì´ì…˜","ì¡°ì§ ë‚´ ê°ˆë“± ì¤‘ì¬Â·ì†Œí†µ ì´‰ì§„"],
    energyDown:["ì¥ê¸° ì „ëµ ë¬¸ì„œ ë‹¨ë… ì‘ì„±","ë³µì¡í•œ ë°ì´í„° ë¶„ì„Â·ìˆ˜ì¹˜ ë¦¬í¬íŠ¸","ì‚¬ëŒê³¼ ë‹¨ì ˆëœ ì±„ í•˜ëŠ” ì‹œìŠ¤í…œ ì„¤ê³„","í˜¼ìì„œ ì˜¤ë˜ í•´ì•¼ í•˜ëŠ” ê¸°íš ì—…ë¬´"],
    manual:{
      request:"ë”°ëœ»í•˜ê²Œ ëŒ€í™”í•˜ê³ , 'ë„ˆë§Œ í•  ìˆ˜ ìˆëŠ” ì¼'ì´ë¼ëŠ” ë§¥ë½ì„ ì „í•´ì£¼ì„¸ìš”. ë‹¨, ê±°ì ˆì´ ì–´ë ¤ìš°ë‹ˆ ì—…ë¬´ëŸ‰ì„ ê°™ì´ ì²´í¬í•´ì£¼ì„¸ìš”.",
      feedback:"ê´€ê³„ë¥¼ í•´ì¹˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ, ê°œì„ ì ì€ 1:1ë¡œ ì¡°ìš©íˆ ì „í•´ì£¼ì„¸ìš”. ê³µê°œ ë¹„íŒì€ í¬ê²Œ ìƒì²˜ë°›ì•„ìš”.",
      avoid:"ì°¨ê°‘ê³  ì‚¬ë¬´ì ìœ¼ë¡œë§Œ ì†Œí†µí•˜ê¸°. ì—…ë¬´ ê²°ê³¼ë§Œ ì´ì•¼ê¸°í•˜ê³  ê³¼ì •ì˜ ë…¸ë ¥ì„ ë¬´ì‹œí•˜ê¸°.",
      stress:"ëª¨ë“  ìš”ì²­ì„ ë‹¤ ë°›ì•„ë“¤ì´ë©´ì„œ ìê¸° ì—…ë¬´ëŠ” ì ì  ë¯¸ë£¨ê¸° ì‹œì‘í•´ìš”. ë°ì€ ì²™ í•˜ì§€ë§Œ í‘œì •ì´ ì§€ì³ë³´ì—¬ìš”."
    },
    recovery:"ì—…ë¬´ëŸ‰ì„ í•¨ê»˜ ì¡°ì •í•´ì£¼ê³ , 'ë„¤ ì¼ë„ ì¤‘ìš”í•´'ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ëª…í™•íˆ ì „í•´ì£¼ì„¸ìš”. í¸í•˜ê²Œ ì´ì•¼ê¸°í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì´ íšŒë³µì— ë„ì›€ë¼ìš”.",
    bestMatch:"builder",bestReason:"ì»¤ë„¥í„°ì˜ í˜„ì¥ê° + ë¹Œë”ì˜ ì²´ê³„ â†’ 'ì‚¬ëŒë„ ì±™ê¸°ê³  ì‹œìŠ¤í…œë„ ì¡ëŠ”' ì´ìƒì ì¸ HRì´ ê°€ëŠ¥í•´ìš”.",
    tensionMatch:"driver",tensionReason:"ì»¤ë„¥í„°ëŠ” ê´€ê³„ë¥¼, ë“œë¼ì´ë²„ëŠ” ê²°ê³¼ë¥¼ ë¨¼ì € ë´ì„œ ì†ë„ ì°¨ì´ ê°€ëŠ¥. 'ì‚¬ëŒ ì´ìŠˆëŠ” ë‚´ê°€, ì‹¤í–‰ì€ ë„¤ê°€'ë¡œ ë¶„ë‹´í•˜ë©´ ì‹œë„ˆì§€."
  },
  driver:{name:"ì‹¤í–‰ ë“œë¼ì´ë²„",emoji:"ğŸš€",code:"D",
    subtitle:"ë§¡ì€ ì¼ì„ ì •í™•í•˜ê³  ë¹ ë¥´ê²Œ ì™„ìˆ˜í•˜ëŠ” BP",
    color:"#00B894",colorLight:"#55EFC4",colorBg:"#EFFFFA",
    desc:"ê³„íšì„ ì„¸ìš°ê³  ì‹¤í–‰í•˜ëŠ” ë° ê°•ì ì´ ìˆì–´ìš”. ë§¡ì€ ì¼ì€ ë°ë“œë¼ì¸ ì•ˆì— í™•ì‹¤í•˜ê²Œ ì²˜ë¦¬í•˜ê³ , ê¼¼ê¼¼í•¨ê³¼ ì¶”ì§„ë ¥ìœ¼ë¡œ íŒ€ì˜ ì‹¤í–‰ë ¥ì„ ë†’ì—¬ì¤˜ìš”.",
    tendency:["ë†’ì€ ì‹¤í–‰ë ¥ê³¼ ì¶”ì§„ë ¥ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë°œíœ˜","ì •í™•í•œ ì¼ì • ê´€ë¦¬ì™€ ë°ë“œë¼ì¸ ì¤€ìˆ˜ì— ì§‘ì¤‘","ê¼¼ê¼¼í•œ ë””í…Œì¼ ì²´í¬ì— ì—ë„ˆì§€ë¥¼ ìŸìŒ","ë©€í‹°íƒœìŠ¤í‚¹ ì†ì—ì„œë„ ë¹ ëœ¨ë¦¬ì§€ ì•ŠëŠ” ê´€ë¦¬ë ¥"],
    caution:["í° ê·¸ë¦¼ì„ ë†“ì¹˜ê³  ì‹¤í–‰ì—ë§Œ ë§¤ëª°ë  ìˆ˜ ìˆìŒ","ë³€í™”ë‚˜ ìƒˆë¡œìš´ ì‹œë„ì— ì €í•­ê°ì´ ìˆì„ ìˆ˜ ìˆìŒ","ê²°ê³¼ë¥¼ ê¸‰íˆ ì¶”êµ¬í•´ ê´€ê³„ê°€ ì†Œí™€í•´ì§ˆ ìˆ˜ ìˆìŒ","'ì •í•´ì§„ ëŒ€ë¡œ'ì— ìµìˆ™í•´ ìœ ì—°í•œ ëŒ€ì‘ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ"],
    energyUp:["ì±„ìš© í”„ë¡œì„¸ìŠ¤ ìš´ì˜ (ì„œì¹­Â·ë©´ì ‘Â·ì²˜ìš° í˜‘ì˜)","HR ìš´ì˜ ì‹¤ë¬´ ìµœì í™”Â·í‘œì¤€í™”","ì¸ì‚¬ ë°ì´í„° ì •ë¦¬Â·ì •ê¸° ë¦¬í¬íŠ¸ ì‘ì„±","ë©´ì ‘ ì¼ì • ì¡°ìœ¨Â·í›„ë³´ì ì»¤ë®¤ë‹ˆì¼€ì´ì…˜","ëª…í™•í•œ ëª©í‘œê°€ ìˆëŠ” ë‹¨ê¸° í”„ë¡œì íŠ¸"],
    energyDown:["ëì´ ì•ˆ ë³´ì´ëŠ” ë°©í–¥ì„± ë…¼ì˜","ì •ë‹µì´ ì—†ëŠ” ê°ì •ì  ëŒ€í™” ì¤‘ì¬","ì¥ê¸°ì ì´ê³  ì¶”ìƒì ì¸ ì „ëµ ê¸°íš","ê²°ë¡  ì—†ì´ ì˜ê²¬ë§Œ ë‚˜ëˆ„ëŠ” ë¸Œë ˆì¸ìŠ¤í† ë°"],
    manual:{
      request:"ëª…í™•í•œ ê¸°ëŒ€ì¹˜ì™€ ë°ë“œë¼ì¸ì„ ë¨¼ì € ì œì‹œí•´ì£¼ì„¸ìš”. 'ì´ê±°ë¥¼ ì–¸ì œê¹Œì§€ ì´ ìˆ˜ì¤€ìœ¼ë¡œ'ê°€ íš¨ê³¼ì ì´ì—ìš”.",
      feedback:"êµ¬ì²´ì ìœ¼ë¡œ 'ì´ê±´ ì˜í–ˆê³ , ì´ê±´ ì´ë ‡ê²Œ ë°”ê¿”ë³´ì' ì‹ìœ¼ë¡œ ëª…í™•í•˜ê²Œ ì „í•´ì£¼ì„¸ìš”.",
      avoid:"ëª¨í˜¸í•˜ê²Œ 'ì•Œì•„ì„œ ì˜ í•´ë´'ë¼ê³  ë˜ì§€ê¸°. ì¤‘ê°„ì— ë°©í–¥ì„ ìì£¼ ë°”ê¾¸ê¸°.",
      stress:"ë” ë¹ ë¥´ê²Œ ë°€ì–´ë¶™ì´ë©´ì„œ ì£¼ë³€ê³¼ ë‹¨ì ˆë˜ê¸° ì‹œì‘í•´ìš”. ê³¼ì •ì„ ê±´ë„ˆë›°ê³  ê²°ê³¼ë§Œ ì¶”êµ¬í•˜ë©° ì§œì¦ì´ ëŠ˜ì–´ë‚˜ìš”."
    },
    recovery:"ì‘ì€ ì„±ì·¨ê°ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ë‹¨ê¸° ê³¼ì—…ì„ ì£¼ê³ , ëª…í™•í•œ ìš°ì„ ìˆœìœ„ë¥¼ í•¨ê»˜ ì •í•´ì£¼ì„¸ìš”. 'ì´ê²ƒë§Œ ëë‚´ë©´ ë¼'ë¼ëŠ” ê²½ê³„ê°€ íšŒë³µì— ë„ì›€ë¼ìš”.",
    bestMatch:"architect",bestReason:"ì„¤ê³„ìì˜ ë¹„ì „ + ë“œë¼ì´ë²„ì˜ ì‹¤í–‰ë ¥ â†’ 'ë°©í–¥ë„ ë§ê³  ì†ë„ë„ ë¹ ë¥¸' ê°€ì¥ íš¨ê³¼ì ì¸ ì¡°í•©.",
    tensionMatch:"connector",tensionReason:"ë“œë¼ì´ë²„ëŠ” ë¹ ë¥¸ ì‹¤í–‰ì„, ì»¤ë„¥í„°ëŠ” ì¶©ë¶„í•œ ì†Œí†µì„ ì›í•´ì„œ í…œí¬ ì°¨ì´ ê°€ëŠ¥. ì„œë¡œì˜ ì†ë„ë¥¼ ì¡´ì¤‘í•˜ë©´ ê· í˜• ì¡íŒ íŒ€."
  }
};
const TYPES=["architect","builder","connector","driver"];
const typeFromScores=(se,pt)=>(se<=0&&pt<=0)?"architect":(se<=0&&pt>0)?"builder":(se>0&&pt<=0)?"connector":"driver";
const strengthMap={strategy:"architect",system:"builder",people:"connector",execution:"driver"};
const STRENGTH_LABELS={architect:"ì „ëµÂ·ë°©í–¥ ì„¤ì •",builder:"ì²´ê³„Â·ì‹œìŠ¤í…œ êµ¬ì¶•",connector:"ì†Œí†µÂ·ê´€ê³„ ì¡°ìœ¨",driver:"ì‹¤í–‰Â·ì™„ìˆ˜ë ¥"};

/* 1:1 Relationship Guide Data */
const REL_GUIDE = {
  "architect>architect":{req:"ì„œë¡œ í° ê·¸ë¦¼ ë…¼ì˜ë¥¼ ì¦ê¸°ì§€ë§Œ, ëˆ„ê°€ ì‹¤í–‰í• ì§€ ê¼­ ì •í•˜ì„¸ìš”",fb:"ë°©í–¥ì„± ê³µê° í›„ 'ê·¸ë˜ì„œ êµ¬ì²´ì ìœ¼ë¡œëŠ”?' ì§ˆë¬¸ì„ ì„œë¡œ ë˜ì ¸ì£¼ì„¸ìš”",warn:"ë‘˜ ë‹¤ ì „ëµë§Œ ë…¼ì˜í•˜ë‹¤ ì‹¤í–‰ì´ ë¹ ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ì¡°ì§ ë¹„ì „ê³¼ ë³€í™” ê´€ë¦¬ë¥¼ í•¨ê»˜ ì„¤ê³„í•˜ë©´ ê¹Šì´ ìˆëŠ” ê²°ê³¼ë¬¼ì´ ë‚˜ì™€ìš”"},
  "architect>builder":{req:"'ì™œ'ë¥¼ ë¨¼ì € ê³µìœ í•˜ê³ , êµ¬ì¡°í™”í•  ì‹œê°„ì„ ì¶©ë¶„íˆ ì£¼ì„¸ìš”",fb:"ë…¼ë¦¬ì™€ ë°ì´í„°ë¡œ ì„¤ëª…í•˜ë©´ ì˜ ë°›ì•„ë“¤ì—¬ìš”",warn:"ì„¤ê³„ìëŠ” ìœ ì—°í•˜ê²Œ, ë¹Œë”ëŠ” ì²´ê³„ì ìœ¼ë¡œ â€” ì†ë„ ì°¨ì´ì— ì£¼ì˜",synergy:"ì„¤ê³„ìê°€ ë°©í–¥ì„ ì¡ê³  ë¹Œë”ê°€ ì‹œìŠ¤í…œí™”í•˜ë©´ ì§€ì† ê°€ëŠ¥í•œ ê²°ê³¼ë¬¼ì´ ë‚˜ì™€ìš”"},
  "architect>connector":{req:"ì˜ë¯¸ì™€ ë§¥ë½ì„ ê³µìœ í•˜ë©´ ì»¤ë„¥í„°ê°€ í˜„ì¥ì—ì„œ ì „íŒŒí•´ì¤„ ê±°ì˜ˆìš”",fb:"ë”°ëœ»í•˜ê²Œ, 1:1ë¡œ. ê³µê°œì  í”¼ë“œë°±ì€ í”¼í•´ì£¼ì„¸ìš”",warn:"ì„¤ê³„ìì˜ ì¶”ìƒì  ë°©í–¥ì´ ì»¤ë„¥í„°ì—ê²Œ ë§‰ì—°í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ì„¤ê³„ìê°€ ë³€í™”ì˜ ë°©í–¥ì„, ì»¤ë„¥í„°ê°€ êµ¬ì„±ì›ì˜ ìˆ˜ìš©ì„ ë‹´ë‹¹í•˜ë©´ ì™„ë²½í•´ìš”"},
  "architect>driver":{req:"ë°°ê²½(Why)ì„ ë¨¼ì € ì„¤ëª…í•œ ë’¤, ëª…í™•í•œ ê¸°ëŒ€ì¹˜ì™€ ë°ë“œë¼ì¸ì„ ì£¼ì„¸ìš”",fb:"êµ¬ì²´ì ìœ¼ë¡œ 'ì´ê±´ ì˜í–ˆê³ , ì´ê±´ ë°”ê¿”ë³´ì' ì‹ìœ¼ë¡œ",warn:"ë“œë¼ì´ë²„ì—ê²Œ ëª¨í˜¸í•œ ë°©í–¥ë§Œ ë˜ì§€ë©´ ë‹µë‹µí•´í•´ìš”",synergy:"ì„¤ê³„ìì˜ ë¹„ì „ + ë“œë¼ì´ë²„ì˜ ì‹¤í–‰ë ¥ = ê°€ì¥ íš¨ê³¼ì ì¸ ì¡°í•©ì´ì—ìš”"},
  "builder>architect":{req:"ë°ì´í„°Â·ë…¼ë¦¬ë§Œ ì „ë‹¬í•˜ì§€ ë§ê³ , 'ì´ê²Œ ì™œ ì¤‘ìš”í•œì§€' ë§¥ë½ë„ ê°™ì´ ì£¼ì„¸ìš”",fb:"ë°©í–¥ì„± ë¨¼ì € ì¸ì •í•˜ê³ , ë””í…Œì¼ í”¼ë“œë°±ì€ ê·¸ ë‹¤ìŒì—",warn:"ë¹Œë”ì˜ ì²´ê³„ ì¤‘ì‹¬ ì ‘ê·¼ì´ ì„¤ê³„ìì—ê² 'ìœ ì—°í•˜ì§€ ì•Šë‹¤'ë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ë¹Œë”ì˜ êµ¬ì¡° + ì„¤ê³„ìì˜ ë°©í–¥ê°ì´ ë§Œë‚˜ë©´ ì „ëµê³¼ ì‹¤í–‰ì´ ì—°ê²°ë¼ìš”"},
  "builder>builder":{req:"ì„œë¡œ ê¸°ì¤€ê³¼ í”„ë ˆì„ì„ ë¨¼ì € ë§ì¶”ê³ , ì—­í• ì„ ëª…í™•íˆ ë‚˜ëˆ„ì„¸ìš”",fb:"ê°ê´€ì  ë°ì´í„°ë¡œ ì„œë¡œ ê²€ì¦í•´ì£¼ë©´ ì‹ ë¢°ê°€ ìŒ“ì—¬ìš”",warn:"ë‘˜ ë‹¤ ì™„ë²½ì£¼ì˜ë¼ ì˜ê²¬ ì¶©ëŒ ì‹œ í‰í–‰ì„ ì„ ë‹¬ë¦´ ìˆ˜ ìˆì–´ìš”",synergy:"ë³µì¡í•œ ì œë„ ì„¤ê³„ë¥¼ í•¨ê»˜ í•˜ë©´ ë¹ˆí‹ˆ ì—†ëŠ” ì‹œìŠ¤í…œì´ ë‚˜ì™€ìš”"},
  "builder>connector":{req:"ë”°ëœ»í•œ í†¤ìœ¼ë¡œ, ì´ ì¼ì´ ì‚¬ëŒë“¤ì—ê²Œ ì–´ë–¤ ì˜ë¯¸ì¸ì§€ í•¨ê»˜ ì„¤ëª…í•´ì£¼ì„¸ìš”",fb:"1:1ë¡œ ì¡°ìš©íˆ, ê´€ê³„ë¥¼ í•´ì¹˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ",warn:"ë¹Œë”ì˜ ì§ì ‘ì Â·ë…¼ë¦¬ì  ì†Œí†µì´ ì»¤ë„¥í„°ì—ê² ì°¨ê°‘ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ë¹Œë”ê°€ ë§Œë“  ì‹œìŠ¤í…œì„ ì»¤ë„¥í„°ê°€ í˜„ì¥ì— ë¶€ë“œëŸ½ê²Œ ì•ˆì°©ì‹œì¼œìš”"},
  "builder>driver":{req:"ëª…í™•í•œ ê¸°ëŒ€ì¹˜Â·ë°ë“œë¼ì¸Â·ê¸°ì¤€ì„ ì œì‹œí•˜ë©´ ë°”ë¡œ ì‹¤í–‰í•´ìš”",fb:"êµ¬ì²´ì  ì‚¬ì‹¤ ê¸°ë°˜ìœ¼ë¡œ ëª…í™•í•˜ê²Œ",warn:"ë¹Œë”ê°€ ê²€í† ì— ì‹œê°„ì„ ì“°ëŠ” ë™ì•ˆ ë“œë¼ì´ë²„ê°€ ë‹µë‹µí•´í•  ìˆ˜ ìˆì–´ìš”",synergy:"ë¹Œë”ê°€ ì„¤ê³„í•˜ê³  ë“œë¼ì´ë²„ê°€ ì‹¤í–‰í•˜ë©´ íš¨ìœ¨ ê·¹ëŒ€í™”"},
  "connector>architect":{req:"ì„¤ê³„ìì˜ í° ê·¸ë¦¼ì„ ì¡´ì¤‘í•˜ë˜, 'í˜„ì¥ì—ì„œëŠ” ì´ëŸ° ë°˜ì‘ì´ ìˆì–´ìš”'ë¡œ ë³´ì™„í•´ì£¼ì„¸ìš”",fb:"ë°©í–¥ì„± ë¨¼ì € ê³µê°í•˜ê³ , í˜„ì¥ í”¼ë“œë°±ì„ ì¶”ê°€í•˜ëŠ” ìˆœì„œë¡œ",warn:"ì»¤ë„¥í„°ì˜ 'ì‚¬ëŒ ë°˜ì‘' ì¤‘ì‹¬ í”¼ë“œë°±ì´ ì„¤ê³„ìì—ê² ì‹¤í–‰ ì €í•­ìœ¼ë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ì»¤ë„¥í„°ì˜ í˜„ì¥ ì¸ì‚¬ì´íŠ¸ê°€ ì„¤ê³„ìì˜ ì „ëµì— í˜„ì‹¤ê°ì„ ë”í•´ìš”"},
  "connector>builder":{req:"ê°ì •ì´ ì•„ë‹Œ êµ¬ì²´ì  ì‚¬ë¡€ì™€ ë°ì´í„°ë¡œ ì „ë‹¬í•˜ë©´ ì˜ ë°›ì•„ë“¤ì—¬ìš”",fb:"ë…¼ë¦¬ì  ê·¼ê±°ë¥¼ ê³ë“¤ì—¬ í”¼ë“œë°±í•˜ë©´ ì„¤ë“ë ¥ì´ ì˜¬ë¼ê°€ìš”",warn:"ì»¤ë„¥í„°ì˜ ê°ì • ì¤‘ì‹¬ ì†Œí†µì´ ë¹Œë”ì—ê² ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ì»¤ë„¥í„°ê°€ í˜„ì¥ ëª©ì†Œë¦¬ë¥¼ ëª¨ì•„ì˜¤ë©´ ë¹Œë”ê°€ ì‹œìŠ¤í…œì— ë°˜ì˜í•´ìš”"},
  "connector>connector":{req:"ì„œë¡œ ê³µê°ì„ ì˜ í•˜ì§€ë§Œ, êµ¬ì²´ì  ì•¡ì…˜ê³¼ ë§ˆê°ì„ ê¼­ ì •í•˜ì„¸ìš”",fb:"ë”°ëœ»í•˜ê²Œ ì£¼ê³ ë°›ë˜, 'ê·¸ë˜ì„œ ì–´ë–»ê²Œ í• ê¹Œ?'ë¡œ ë§ˆë¬´ë¦¬í•´ì£¼ì„¸ìš”",warn:"ë‘˜ ë‹¤ ê±°ì ˆì„ ëª» í•´ì„œ ì„œë¡œ ì—…ë¬´ë¥¼ ë– ë„˜ê¸°ëŠ” êµ¬ì¡°ê°€ ë  ìˆ˜ ìˆì–´ìš”",synergy:"êµ¬ì„±ì› ì¼€ì–´ì™€ ì†Œí†µ ì´‰ì§„ì—ì„œ ìµœê°• íŒ€ì›Œí¬ë¥¼ ë°œíœ˜í•´ìš”"},
  "connector>driver":{req:"ê²°ë¡ ê³¼ ê¸°ëŒ€ì¹˜ë¥¼ ë¨¼ì € ì „ë‹¬í•˜ê³ , ë§¥ë½ì€ ê°„ê²°í•˜ê²Œ ì¶”ê°€í•´ì£¼ì„¸ìš”",fb:"ëª…í™•í•˜ê³  êµ¬ì²´ì ìœ¼ë¡œ. ê°ì •ì  í‘œí˜„ë³´ë‹¤ ì‚¬ì‹¤ ìœ„ì£¼ë¡œ",warn:"ì»¤ë„¥í„°ê°€ ê´€ê³„ë¥¼ ì±™ê¸°ëŠë¼ ëŠë ¤ì§€ë©´ ë“œë¼ì´ë²„ê°€ ë‹µë‹µí•´í•  ìˆ˜ ìˆì–´ìš”",synergy:"ì»¤ë„¥í„°ê°€ ì‚¬ëŒ ì´ìŠˆë¥¼, ë“œë¼ì´ë²„ê°€ ì‹¤í–‰ì„ ë§¡ìœ¼ë©´ ì„œë¡œ ë¶€ë‹´ì´ ì¤„ì–´ìš”"},
  "driver>architect":{req:"ì‹¤í–‰ ê³„íšë¿ ì•„ë‹ˆë¼ 'ì™œ ì´ ë°©í–¥ì¸ì§€' ë°°ê²½ë„ ê°™ì´ ê³µìœ í•´ì£¼ì„¸ìš”",fb:"ë°©í–¥ì„±ì„ ë¨¼ì € ì¸ì •í•œ í›„ ì‹¤í–‰ ê´€ì  í”¼ë“œë°±ì„",warn:"ë“œë¼ì´ë²„ì˜ 'ë¹¨ë¦¬ ê²°ë¡  ë‚´ì'ê°€ ì„¤ê³„ìì—ê² 'ê¹Šì´ ì—†ë‹¤'ë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ë“œë¼ì´ë²„ì˜ ì‹¤í–‰ë ¥ì´ ì„¤ê³„ìì˜ ì „ëµì„ í˜„ì‹¤ë¡œ ë§Œë“¤ì–´ìš”"},
  "driver>builder":{req:"ë°ì´í„°ì™€ ë…¼ë¦¬ ê·¼ê±°ë¥¼ ì¤€ë¹„í•´ì„œ ì „ë‹¬í•˜ë©´ ê²€í† ê°€ ë¹¨ë¼ì ¸ìš”",fb:"ì‚¬ì‹¤ ê¸°ë°˜ìœ¼ë¡œ, ì¶©ë¶„í•œ ê²€í†  ì‹œê°„ì„ ì£¼ì„¸ìš”",warn:"ë“œë¼ì´ë²„ì˜ 'ì¼ë‹¨ í•´ë³´ì'ê°€ ë¹Œë”ì—ê² 'ì¤€ë¹„ ì•ˆ ëëŠ”ë°'ë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ë“œë¼ì´ë²„ê°€ ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ê³  ë¹Œë”ê°€ ì²´ê³„ë¥¼ ë³´ì™„í•˜ë©´ ì†ë„+í’ˆì§ˆ ë‘˜ ë‹¤ ì¡ì•„ìš”"},
  "driver>connector":{req:"ë”°ëœ»í•œ í†¤ì„ ì¶”ê°€í•˜ê³ , ì—…ë¬´ëŸ‰ì´ ê³¼í•˜ì§€ ì•Šì€ì§€ ì²´í¬í•´ì£¼ì„¸ìš”",fb:"1:1ë¡œ ì¡°ìš©íˆ, ë…¸ë ¥ì„ ì¸ì •í•œ ë’¤ ê°œì„ ì ì„",warn:"ë“œë¼ì´ë²„ì˜ ë¹ ë¥¸ ì†ë„ì™€ ì§ì ‘ì  ì†Œí†µì´ ì»¤ë„¥í„°ì—ê² ì••ë°•ìœ¼ë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ë“œë¼ì´ë²„ê°€ ì‹¤í–‰ì„, ì»¤ë„¥í„°ê°€ ì‚¬ëŒ ì¼€ì–´ë¥¼ ë‚˜ëˆ„ë©´ ê· í˜• ì¡íŒ íŒ€"},
  "driver>driver":{req:"ì„œë¡œ ê¸°ëŒ€ì¹˜ì™€ ì—­í• ì„ ëª…í™•íˆ ë‚˜ëˆ„ê³ , ê²¹ì¹˜ì§€ ì•Šê²Œ í•˜ì„¸ìš”",fb:"ê²°ê³¼ ê¸°ë°˜ìœ¼ë¡œ ì§ì ‘ì ìœ¼ë¡œ. ë‘˜ ë‹¤ ëª…í™•í•œ ê±¸ ì¢‹ì•„í•´ìš”",warn:"ë‘˜ ë‹¤ ë¹ ë¥´ê²Œ ë°€ì–´ë¶™ì—¬ì„œ ê´€ê³„ë‚˜ í° ê·¸ë¦¼ì´ ë¹ ì§ˆ ìˆ˜ ìˆì–´ìš”",synergy:"ì‹¤í–‰ë ¥ì´ ë‘ ë°°! ë‹¨ê¸° í”„ë¡œì íŠ¸ì—ì„œ ìµœê°•ì˜ íš¨ìœ¨ì„ ë³´ì—¬ìš”"}
};

/* Task Recommendations */
const TASKS = [
  {name:"ì±„ìš© ë¸Œëœë”© ê¸°íš",lead:"architect",support:"driver"},
  {name:"ì±„ìš© í”„ë¡œì„¸ìŠ¤ ìš´ì˜",lead:"driver",support:"connector"},
  {name:"í‰ê°€Â·ë³´ìƒ ì²´ê³„ ì„¤ê³„",lead:"builder",support:"architect"},
  {name:"ì¡°ì§ë¬¸í™” ì§„ë‹¨Â·ê°œì„ ",lead:"architect",support:"connector"},
  {name:"êµ¬ì„±ì› ìƒë‹´Â·ê³ ì¶© ì²˜ë¦¬",lead:"connector",support:"architect"},
  {name:"HR ë°ì´í„° ë¶„ì„Â·ëŒ€ì‹œë³´ë“œ",lead:"builder",support:"driver"},
  {name:"í˜„ì—… ë¦¬ë” íŒŒíŠ¸ë„ˆì‹­",lead:"connector",support:"builder"},
  {name:"ì˜¨ë³´ë”© ì„¤ê³„Â·ìš´ì˜",lead:"connector",support:"driver"},
  {name:"ì¸ì‚¬ ì œë„ ê¸°íš",lead:"builder",support:"architect"},
  {name:"HR ìš´ì˜ ìµœì í™”Â·í‘œì¤€í™”",lead:"driver",support:"builder"},
];

/* ===== STATE ===== */
let state = {screen:"intro", qIdx:0, scores:{SE:0,PT:0}, strengthAnswers:[], sqIdx:0, userName:"", members:[]};

/* ===== RENDER ===== */
const $=id=>document.getElementById(id);
const app=()=>$("app");

function render(){
  window.scrollTo(0,0);
  switch(state.screen){
    case "intro": renderIntro(); break;
    case "questions": renderQuestion(); break;
    case "strength": renderStrength(); break;
    case "name": renderName(); break;
    case "result": renderResult(); break;
    case "team": renderTeam(); break;
  }
}

function renderIntro(){
  app().innerHTML=`
  <div class="fade-in" style="text-align:center;padding-top:40px">
    <div style="font-size:56px;margin-bottom:16px">ğŸ§­</div>
    <h1 style="font-size:28px;font-weight:800;line-height:1.3;letter-spacing:-.5px;margin-bottom:8px">ë‚˜ëŠ” ì–´ë–¤ HRBPì¼ê¹Œ?</h1>
    <p style="font-size:15px;color:#6B7280;margin-bottom:28px;line-height:1.6">HRBP ì—…ë¬´ ìŠ¤íƒ€ì¼ ì§„ë‹¨ Â· 20ë¬¸í•­ Â· ì•½ 5ë¶„</p>
    <div class="card" style="text-align:left">
      <p style="font-size:15px;color:#374151;line-height:1.8;margin-bottom:18px">20ê°œ ì§ˆë¬¸ì— ë‹µí•˜ë©´, ë‚˜ì˜ HRBP ì—…ë¬´ ìŠ¤íƒ€ì¼ì„ ì•Œë ¤ë“œë ¤ìš”.</p>
      ${[["âš¡","ì—ë„ˆì§€ê°€ ë‚˜ëŠ” ê³¼ì—… / ê¹ì´ëŠ” ê³¼ì—…"],["ğŸ†","ë‚´ê°€ ì‹¤ì œë¡œ ì˜ ë°œíœ˜í•˜ëŠ” ê°•ì "],["ğŸ“‹","ë‚˜ì™€ í˜‘ì—…í•  ë•Œ ì‚¬ìš©ì„¤ëª…ì„œ"],["ğŸ˜°","ìŠ¤íŠ¸ë ˆìŠ¤ ì‹œê·¸ë„ & íšŒë³µ ë°©ë²•"],["ğŸ¤","íŒ€ì›ë³„ 1:1 ì†Œí†µ ê°€ì´ë“œ"],["ğŸ“Š","ê³¼ì—…ë³„ ë¦¬ë“œ/ì„œí¬íŠ¸ ì¶”ì²œ"]].map(([i,t])=>`<div style="display:flex;align-items:center;gap:12px;padding:10px 14px;background:#F9FAFB;border-radius:12px;font-size:14px;color:#374151;margin-bottom:8px"><span style="font-size:18px">${i}</span>${t}</div>`).join("")}
      <p style="font-size:13px;color:#9CA3AF;margin-top:14px;text-align:center">ì •ë‹µì€ ì—†ì–´ìš” â€” ì§ê´€ì ìœ¼ë¡œ ê³¨ë¼ì£¼ì„¸ìš”</p>
    </div>
    <button class="btn btn-primary" onclick="startTest()" style="margin-top:16px">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
  </div>`;
}

function renderQuestion(){
  const q=QUESTIONS[state.qIdx];
  const total=QUESTIONS.length;
  const pct=((state.qIdx+1)/total)*100;
  const colors=["#6C5CE7","#A29BFE","#D1D5DB","#74B9FF","#0984E3"];
  const labels=["í™•ì‹¤íˆ A","ì•½ê°„ A","ì¤‘ë¦½","ì•½ê°„ B","í™•ì‹¤íˆ B"];
  const sizes=[46,34,38,34,46];

  app().innerHTML=`
  <div style="margin-top:20px">
    <div style="display:flex;justify-content:space-between;margin-bottom:8px">
      <span style="font-size:13px;color:#9CA3AF;font-weight:600">Q${state.qIdx+1} / ${total}</span>
      <span style="font-size:13px;color:#9CA3AF">${Math.round(pct)}%</span>
    </div>
    <div style="height:6px;background:#E5E7EB;border-radius:3px;overflow:hidden">
      <div style="height:100%;width:${pct}%;background:linear-gradient(90deg,#6C5CE7,#0984E3);border-radius:3px;transition:width .5s"></div>
    </div>
  </div>
  <div class="fade-in" style="padding:40px 0 20px;text-align:center">
    <h2 style="font-size:18px;font-weight:700;line-height:1.5;margin-bottom:28px">${q.text}</h2>
    <div style="display:flex;gap:10px;margin-bottom:12px">
      <div style="flex:1;padding:14px;background:#F9FAFB;border-radius:14px;font-size:13px;color:#374151;line-height:1.5;text-align:center">
        <span style="font-size:11px;color:#6C5CE7;font-weight:700;display:block;margin-bottom:4px">A</span>${q.a}
      </div>
      <div style="flex:1;padding:14px;background:#F9FAFB;border-radius:14px;font-size:13px;color:#374151;line-height:1.5;text-align:center">
        <span style="font-size:11px;color:#0984E3;font-weight:700;display:block;margin-bottom:4px">B</span>${q.b}
      </div>
    </div>
    <div class="scale-row">
      ${[-2,-1,0,1,2].map((v,i)=>`
        <div class="scale-col">
          <button class="scale-btn" style="width:${sizes[i]}px;height:${sizes[i]}px" onclick="answerQ(${v},${i})" onmouseover="this.style.borderColor='${colors[i]}'" onmouseout="this.style.borderColor='#E5E7EB'"></button>
          <span class="scale-label">${labels[i]}</span>
        </div>
      `).join("")}
    </div>
    <div style="display:flex;justify-content:space-between;padding:0 8px;margin-top:4px">
      <span style="font-size:12px;color:#6C5CE7;font-weight:600">â† A</span>
      <span style="font-size:12px;color:#0984E3;font-weight:600">B â†’</span>
    </div>
  </div>`;
}

function renderStrength(){
  const sq=STRENGTH_QUESTIONS[state.sqIdx];
  const total=STRENGTH_QUESTIONS.length;
  const qNum=QUESTIONS.length+state.sqIdx+1;
  const pct=((qNum)/(QUESTIONS.length+total))*100;

  app().innerHTML=`
  <div style="margin-top:20px">
    <div style="display:flex;justify-content:space-between;margin-bottom:8px">
      <span style="font-size:13px;color:#9CA3AF;font-weight:600">Q${qNum} / ${QUESTIONS.length+total}</span>
      <span style="font-size:13px;color:#9CA3AF">${Math.round(pct)}%</span>
    </div>
    <div style="height:6px;background:#E5E7EB;border-radius:3px;overflow:hidden">
      <div style="height:100%;width:${pct}%;background:linear-gradient(90deg,#6C5CE7,#0984E3);border-radius:3px;transition:width .5s"></div>
    </div>
  </div>
  <div class="fade-in" style="padding:40px 0 20px">
    <div style="text-align:center;margin-bottom:8px">
      <span style="font-size:12px;background:#FFFBEB;color:#92400E;padding:4px 10px;border-radius:8px;font-weight:600">ğŸ† ì‹¤ì œ ê°•ì  íŒŒì•…</span>
    </div>
    <h2 style="font-size:18px;font-weight:700;line-height:1.5;margin-bottom:24px;text-align:center">${sq.text}</h2>
    <div style="display:flex;flex-direction:column;gap:10px">
      ${sq.opts.map((o,i)=>`
        <button onclick="answerSQ('${o.v}')" style="width:100%;padding:16px 18px;font-size:14px;color:#374151;background:#fff;border:2px solid #E5E7EB;border-radius:14px;cursor:pointer;text-align:left;font-family:inherit;transition:all .15s;line-height:1.5" onmouseover="this.style.borderColor='#6C5CE7';this.style.background='#F9F8FF'" onmouseout="this.style.borderColor='#E5E7EB';this.style.background='#fff'">${o.label}</button>
      `).join("")}
    </div>
  </div>`;
}

function renderName(){
  app().innerHTML=`
  <div class="fade-in" style="padding-top:60px;text-align:center">
    <div style="font-size:48px;margin-bottom:16px">âœ¨</div>
    <h2 style="font-size:22px;font-weight:700;margin-bottom:8px">ê±°ì˜ ë‹¤ ëì–´ìš”!</h2>
    <p style="font-size:14px;color:#6B7280;margin-bottom:32px">íŒ€ ì¡°í•© ë¶„ì„ì— ì‚¬ìš©í•  ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
    <input id="nameInput" class="input" placeholder="ì´ë¦„ (ì˜ˆ: í•œì„¤)" style="text-align:center;font-size:16px;margin-bottom:16px" onkeydown="if(event.key==='Enter')submitName()">
    <button class="btn btn-primary" onclick="submitName()">ê²°ê³¼ ë³´ê¸°</button>
  </div>`;
  setTimeout(()=>{const inp=$("nameInput");if(inp)inp.focus();},300);
}

function renderResult(){
  const tk=typeFromScores(state.scores.SE,state.scores.PT);
  const t=T[tk];
  const best=T[t.bestMatch];
  const tension=T[t.tensionMatch];

  // Strength analysis
  const sCounts={};
  state.strengthAnswers.forEach(a=>{sCounts[a]=(sCounts[a]||0)+1;});
  const sortedS=Object.entries(sCounts).sort((a,b)=>b[1]-a[1]);
  const topStrength=sortedS[0]?strengthMap[sortedS[0][0]]:tk;
  const topStrengthLabel=STRENGTH_LABELS[topStrength];

  // Share code
  const sCode = `${state.userName}:${t.code}:${state.scores.SE}:${state.scores.PT}:${sortedS.map(s=>s[0][0]).join("")}`;

  app().innerHTML=`
  <div class="fade-in">
    <!-- Header -->
    <div style="text-align:center;padding:32px 0 20px">
      <p style="font-size:14px;color:#9CA3AF;margin-bottom:8px;font-weight:500">ë‹¹ì‹ ì˜ HRBP ìœ í˜•ì€</p>
      <div style="font-size:52px;margin-bottom:8px">${t.emoji}</div>
      <h1 style="font-size:30px;font-weight:800;color:${t.color};margin-bottom:6px;letter-spacing:-.5px">${t.name}</h1>
      <p style="font-size:15px;color:#6B7280;font-weight:500">${t.subtitle}</p>
    </div>

    <!-- Desc -->
    <div class="card"><p style="font-size:15px;color:#374151;line-height:1.8">${t.desc}</p></div>

    <!-- Share Code -->
    <div class="card" style="background:${t.colorBg};border:1px solid ${t.colorLight};text-align:center">
      <p style="font-size:12px;color:#9CA3AF;margin-bottom:10px">íŒ€ ì¡°í•© ë¶„ì„ìš© ê³µìœ  ì½”ë“œ</p>
      <div style="display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:10px">
        <code id="shareCode" style="font-size:16px;font-weight:700;color:${t.color};background:#fff;padding:10px 18px;border-radius:10px;border:1px solid ${t.colorLight};letter-spacing:1px">${sCode}</code>
      </div>
      <button onclick="copyCode()" id="copyBtn" style="font-size:13px;font-weight:600;color:${t.color};background:#fff;border:1px solid ${t.colorLight};padding:8px 20px;border-radius:10px;cursor:pointer">ğŸ“‹ ì½”ë“œ ë³µì‚¬</button>
      <p style="font-size:11px;color:#9CA3AF;margin-top:8px">ì´ ì½”ë“œë¥¼ ìŠ¬ë™ì´ë‚˜ ì¹´í†¡ì— ê³µìœ í•˜ì„¸ìš”</p>
    </div>

    <!-- Chart -->
    <div class="card">
      <div class="sec-title">ğŸ“ ë‚˜ì˜ ìœ„ì¹˜</div>
      ${makeChart([{name:state.userName||"ë‚˜",se:state.scores.SE,pt:state.scores.PT,typeKey:tk}])}
      <div style="display:flex;justify-content:center;gap:20px;margin-top:12px">
        <div style="text-align:center"><div style="font-size:11px;color:#9CA3AF;font-weight:600">ì „ëµâ†”ì‹¤í–‰</div><div style="font-size:18px;font-weight:800;color:${t.color}">${state.scores.SE>0?"+":""}${state.scores.SE}</div></div>
        <div style="width:1px;background:${t.colorLight}"></div>
        <div style="text-align:center"><div style="font-size:11px;color:#9CA3AF;font-weight:600">ê´€ê³„â†”ê³¼ì—…</div><div style="font-size:18px;font-weight:800;color:${t.color}">${state.scores.PT>0?"+":""}${state.scores.PT}</div></div>
      </div>
    </div>

    <!-- Strength -->
    <div class="card">
      <div class="sec-title">ğŸ† ì‹¤ì œ ë°œíœ˜ ê°•ì </div>
      <div style="background:${T[topStrength].colorBg};border:1px solid ${T[topStrength].colorLight};border-radius:14px;padding:18px;margin-bottom:12px">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
          <span style="font-size:24px">${T[topStrength].emoji}</span>
          <div>
            <div style="font-size:16px;font-weight:700;color:${T[topStrength].color}">${topStrengthLabel}</div>
            <div style="font-size:12px;color:#9CA3AF">ë™ë£Œë“¤ì´ ì‹¤ì œë¡œ ì¸ì •í•˜ëŠ” ê°•ì  ì˜ì—­</div>
          </div>
        </div>
        ${topStrength!==tk?`<div style="background:#FFFBEB;border:1px solid #FDE68A;border-radius:10px;padding:12px;margin-top:8px"><p style="font-size:13px;color:#92400E;line-height:1.6">ğŸ’¡ ì„±í–¥ì€ <strong>${t.name}</strong>ì´ì§€ë§Œ, ì‹¤ì œ ë°œíœ˜ ê°•ì ì€ <strong>${topStrengthLabel}</strong> ì˜ì—­ì´ì—ìš”. ì¢‹ì•„í•˜ëŠ” ê²ƒê³¼ ì˜í•˜ëŠ” ê²ƒì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”!</p></div>`:`<p style="font-size:13px;color:#059669;margin-top:4px">âœ… ì„±í–¥ê³¼ ì‹¤ì œ ê°•ì ì´ ì¼ì¹˜í•´ìš”! ìì—°ìŠ¤ëŸ½ê²Œ ì˜ ë°œíœ˜ë˜ê³  ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”.</p>`}
      </div>
    </div>

    <!-- Energy Map -->
    <div class="card">
      <div class="sec-title">âš¡ ì—ë„ˆì§€ ë§µ</div>
      <div style="margin-bottom:14px">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px">
          <span style="background:#ECFDF5;color:#059669;font-size:12px;font-weight:700;padding:4px 10px;border-radius:8px">ğŸ”‹ ì—ë„ˆì§€ UP</span>
        </div>
        <div style="display:flex;flex-wrap:wrap;gap:6px">${t.energyUp.map(x=>`<span class="tag tag-green">${x}</span>`).join("")}</div>
      </div>
      <div style="height:1px;background:#F3F4F6;margin-bottom:14px"></div>
      <div>
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px">
          <span style="background:#FEF2F2;color:#DC2626;font-size:12px;font-weight:700;padding:4px 10px;border-radius:8px">ğŸª« ì—ë„ˆì§€ DOWN</span>
        </div>
        <div style="display:flex;flex-wrap:wrap;gap:6px">${t.energyDown.map(x=>`<span class="tag tag-red">${x}</span>`).join("")}</div>
      </div>
    </div>

    <!-- Tendency & Caution -->
    <div class="card">
      <div class="sec-title">ğŸ” ìì—°ìŠ¤ëŸ¬ìš´ ê²½í–¥ & âš ï¸ ì£¼ì˜í•  ì </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div>
          <p style="font-size:12px;font-weight:700;color:#059669;margin-bottom:10px">ğŸ” ì´ëŸ° ê±¸ ìì—°ìŠ¤ëŸ½ê²Œ ë°œíœ˜í•´ìš”</p>
          ${t.tendency.map(s=>`<p style="font-size:13px;color:#374151;line-height:1.6;margin-bottom:6px;padding-left:8px;border-left:2px solid #BBF7D0">${s}</p>`).join("")}
        </div>
        <div>
          <p style="font-size:12px;font-weight:700;color:#DC2626;margin-bottom:10px">âš ï¸ ì£¼ì˜í•  ì </p>
          ${t.caution.map(c=>`<p style="font-size:13px;color:#374151;line-height:1.6;margin-bottom:6px;padding-left:8px;border-left:2px solid #FECACA">${c}</p>`).join("")}
        </div>
      </div>
    </div>

    <!-- User Manual -->
    <div class="card" style="border:2px solid ${t.color}">
      <div class="sec-title">ğŸ“‹ ë‚˜ì˜ ì‚¬ìš©ì„¤ëª…ì„œ</div>
      <p style="font-size:12px;color:#9CA3AF;margin-bottom:14px;margin-top:-8px">íŒ€ ë…¸ì…˜ì— ë¶™ì—¬ë†“ê³  ì°¸ê³ í•˜ì„¸ìš”</p>
      ${[{icon:"ğŸ“¨",label:"ë‚˜ì—ê²Œ ì—…ë¬´ ìš”ì²­í•  ë•Œ",text:t.manual.request},{icon:"ğŸ’¬",label:"ë‚˜ì—ê²Œ í”¼ë“œë°± ì¤„ ë•Œ",text:t.manual.feedback},{icon:"ğŸš«",label:"ì´ê±´ í”¼í•´ì£¼ì„¸ìš”",text:t.manual.avoid},{icon:"ğŸ˜°",label:"ë‚´ê°€ ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ìœ¼ë©´",text:t.manual.stress}].map((item,i)=>`
        <div style="padding:14px 16px;background:${i%2===0?t.colorBg:"#FAFAFA"};border-radius:12px;margin-bottom:${i<3?10:0}px">
          <div style="font-size:13px;font-weight:700;color:${t.color};margin-bottom:6px">${item.icon} ${item.label}</div>
          <p style="font-size:14px;color:#374151;line-height:1.7">${item.text}</p>
        </div>`).join("")}
    </div>

    <!-- Stress -->
    <div class="card">
      <div class="sec-title">ğŸ”¥ ê³¼ë¶€í•˜ ì‹œê·¸ë„ & íšŒë³µë²•</div>
      <div style="background:#FEF2F2;border-radius:14px;padding:18px;border:1px solid #FECACA;margin-bottom:12px">
        <div style="font-size:13px;font-weight:700;color:#DC2626;margin-bottom:8px">âš ï¸ ì´ëŸ° ëª¨ìŠµì´ ë³´ì´ë©´ ê³¼ë¶€í•˜ ì‹ í˜¸</div>
        <p style="font-size:14px;color:#374151;line-height:1.7">${t.manual.stress}</p>
      </div>
      <div style="background:#ECFDF5;border-radius:14px;padding:18px;border:1px solid #BBF7D0">
        <div style="font-size:13px;font-weight:700;color:#059669;margin-bottom:8px">ğŸ’š ì´ë ‡ê²Œ ë„ì™€ì£¼ì„¸ìš”</div>
        <p style="font-size:14px;color:#374151;line-height:1.7">${t.recovery}</p>
      </div>
    </div>

    <!-- Compatibility -->
    <div class="card">
      <div class="sec-title">ğŸ¤ ìœ í˜• ê¶í•©</div>
      <div style="background:#F0FDF4;border-radius:14px;padding:18px;border:1px solid #BBF7D0;margin-bottom:12px">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
          <span style="font-size:20px">${best.emoji}</span>
          <span style="font-size:14px;font-weight:700;color:#166534">ì‹œë„ˆì§€: ${best.name}</span>
        </div>
        <p style="font-size:14px;color:#374151;line-height:1.6">${t.bestReason}</p>
      </div>
      <div style="background:#FFFBEB;border-radius:14px;padding:18px;border:1px solid #FDE68A">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
          <span style="font-size:20px">${tension.emoji}</span>
          <span style="font-size:14px;font-weight:700;color:#92400E">ì£¼ì˜: ${tension.name}</span>
        </div>
        <p style="font-size:14px;color:#374151;line-height:1.6">${t.tensionReason}</p>
      </div>
    </div>

    <!-- Actions -->
    <div style="display:flex;gap:12px;margin-bottom:16px">
      <button class="btn btn-primary" onclick="goTeam()" style="flex:1">ğŸ‘¥ íŒ€ ì¡°í•© ë³´ê¸°</button>
      <button class="btn btn-secondary" onclick="restart()" style="flex:1">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸</button>
    </div>
    <div style="height:32px"></div>
  </div>`;
}

function renderTeam(){
  const myTk=typeFromScores(state.scores.SE,state.scores.PT);
  if(state.members.length===0){
    state.members=[{name:state.userName||"ë‚˜",se:state.scores.SE,pt:state.scores.PT,typeKey:myTk}];
  }

  // Type counts
  const typeCounts={};
  state.members.forEach(m=>{typeCounts[m.typeKey]=(typeCounts[m.typeKey]||0)+1;});
  const missing=TYPES.filter(t=>!typeCounts[t]);

  // 1:1 guides for "me" to each other member
  const me=state.members[0];
  const others=state.members.slice(1);

  app().innerHTML=`
  <div class="fade-in">
    <button onclick="goResult()" style="display:flex;align-items:center;gap:6px;font-size:14px;color:#6B7280;background:none;border:none;cursor:pointer;padding:12px 0;font-weight:600;font-family:inherit">â† ë‚´ ê²°ê³¼ë¡œ ëŒì•„ê°€ê¸°</button>
    <h2 style="font-size:24px;font-weight:800;margin-bottom:8px">ğŸ‘¥ íŒ€ ì¡°í•© ë¶„ì„</h2>
    <p style="font-size:14px;color:#9CA3AF;margin-bottom:24px">íŒ€ì›ë“¤ì˜ ê³µìœ  ì½”ë“œë¥¼ ë¶™ì—¬ë„£ì–´ í•œëˆˆì— ë¹„êµí•˜ì„¸ìš”</p>

    <!-- Chart -->
    <div class="card">${makeChart(state.members,320)}</div>

    <!-- Type Distribution -->
    ${state.members.length>1?`
    <div class="card">
      <div class="sec-title">ğŸ“Š íŒ€ ì¸ì‚¬ì´íŠ¸</div>
      <div style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:14px">
        ${TYPES.map(tk=>{const cnt=typeCounts[tk]||0;const t=T[tk];return`
          <div style="flex:1 1 45%;padding:12px;background:${cnt>0?t.colorBg:"#F9FAFB"};border-radius:12px;border:1px solid ${cnt>0?t.colorLight:"#E5E7EB"};text-align:center">
            <div style="font-size:20px">${t.emoji}</div>
            <div style="font-size:12px;font-weight:700;color:${cnt>0?t.color:"#9CA3AF"};margin-top:4px">${t.name}</div>
            <div style="font-size:18px;font-weight:800;color:${cnt>0?t.color:"#D1D5DB"};margin-top:2px">${cnt}ëª…</div>
          </div>`;}).join("")}
      </div>
      ${missing.length>0?`
      <div style="background:#FFFBEB;border-radius:12px;padding:14px;border:1px solid #FDE68A">
        <p style="font-size:13px;font-weight:700;color:#92400E;margin-bottom:4px">ğŸ’¡ ìš°ë¦¬ íŒ€ì— ë¶€ì¡±í•œ ê´€ì </p>
        <p style="font-size:14px;color:#374151;line-height:1.6">${missing.map(tk=>T[tk].name).join(", ")} ìœ í˜•ì´ ì—†ì–´ìš”. í•´ë‹¹ ê´€ì ì„ ì˜ì‹ì ìœ¼ë¡œ ë³´ì™„í•˜ë©´ ì¢‹ì•„ìš”.</p>
      </div>`:`
      <div style="background:#F0FDF4;border-radius:12px;padding:14px;border:1px solid #BBF7D0">
        <p style="font-size:13px;font-weight:700;color:#059669;margin-bottom:4px">âœ¨ ê· í˜• ì¡íŒ íŒ€!</p>
        <p style="font-size:14px;color:#374151;line-height:1.6">4ê°€ì§€ ìœ í˜•ì´ ëª¨ë‘ ìˆì–´ìš”. ê° ìœ í˜•ì˜ ê°•ì ì„ ì‚´ë ¤ ì—­í• ì„ ë‚˜ëˆ„ë©´ ì‹œë„ˆì§€ê°€ ë‚  ê±°ì˜ˆìš”.</p>
      </div>`}
    </div>
    `:""}

    <!-- 1:1 Relationship Guides -->
    ${others.length>0?`
    <div class="card">
      <div class="sec-title">ğŸ’¬ ë‚˜ â†’ íŒ€ì› 1:1 ì†Œí†µ ê°€ì´ë“œ</div>
      ${others.map(other=>{
        const key=me.typeKey+">"+other.typeKey;
        const guide=REL_GUIDE[key]||REL_GUIDE[me.typeKey+">"+me.typeKey];
        const ot=T[other.typeKey];
        return`
        <div style="border:1px solid ${ot.colorLight};border-radius:14px;padding:16px;margin-bottom:12px;background:${ot.colorBg}22">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px">
            <span style="font-size:20px">${ot.emoji}</span>
            <div>
              <div style="font-size:15px;font-weight:700;color:${ot.color}">${other.name}</div>
              <div style="font-size:12px;color:#9CA3AF">${ot.name}</div>
            </div>
          </div>
          ${[{icon:"ğŸ“¨",label:"ìš”ì²­í•  ë•Œ",text:guide.req},{icon:"ğŸ’¬",label:"í”¼ë“œë°±í•  ë•Œ",text:guide.fb},{icon:"âš ï¸",label:"ì£¼ì˜",text:guide.warn},{icon:"âœ¨",label:"ì‹œë„ˆì§€",text:guide.synergy}].map((item,i)=>`
            <div style="padding:10px 12px;background:${i%2===0?"#fff":"#FAFAFA"};border-radius:10px;margin-bottom:${i<3?6:0}px">
              <span style="font-size:12px;font-weight:700;color:${ot.color}">${item.icon} ${item.label}</span>
              <p style="font-size:13px;color:#374151;line-height:1.6;margin-top:4px">${item.text}</p>
            </div>`).join("")}
        </div>`;}).join("")}
    </div>`:""}

    <!-- Task Recommendations -->
    ${state.members.length>1?`
    <div class="card">
      <div class="sec-title">ğŸ“‹ ê³¼ì—…ë³„ ë¦¬ë“œ/ì„œí¬íŠ¸ ì¶”ì²œ</div>
      <p style="font-size:12px;color:#9CA3AF;margin-bottom:14px">'ì´ ì‚¬ëŒë§Œ í•´ë¼'ê°€ ì•„ë‹ˆë¼ 'ì´ ì¡°í•©ì´ ì‹œë„ˆì§€ ë‚˜ìš”'ë¼ëŠ” ì œì•ˆì´ì—ìš”</p>
      ${TASKS.map(task=>{
        const leads=state.members.filter(m=>m.typeKey===task.lead);
        const supports=state.members.filter(m=>m.typeKey===task.support);
        if(leads.length===0&&supports.length===0) return "";
        return`
        <div style="padding:14px;background:#F9FAFB;border-radius:12px;margin-bottom:8px">
          <div style="font-size:14px;font-weight:700;color:#1A1A2E;margin-bottom:8px">${task.name}</div>
          <div style="display:flex;flex-wrap:wrap;gap:6px">
            ${leads.map(l=>`<span style="font-size:12px;padding:4px 10px;background:${T[l.typeKey].colorBg};color:${T[l.typeKey].color};border-radius:8px;border:1px solid ${T[l.typeKey].colorLight};font-weight:600">${T[l.typeKey].emoji} ${l.name} Â· ë¦¬ë“œ</span>`).join("")}
            ${supports.map(s=>`<span style="font-size:12px;padding:4px 10px;background:#F3F4F6;color:#6B7280;border-radius:8px;border:1px solid #E5E7EB">${T[s.typeKey].emoji} ${s.name} Â· ì„œí¬íŠ¸</span>`).join("")}
          </div>
        </div>`;}).join("")}
    </div>`:""}

    <!-- Member List -->
    <div class="card">
      <div class="sec-title">ğŸ‘¤ íŒ€ì› ëª©ë¡</div>
      ${state.members.map((m,i)=>`
        <div style="display:flex;align-items:center;gap:10px;padding:10px 14px;background:${i===0?T[m.typeKey].colorBg:"#F9FAFB"};border-radius:12px;margin-bottom:8px">
          <span style="font-size:20px">${T[m.typeKey].emoji}</span>
          <div style="flex:1">
            <div style="font-size:14px;font-weight:700;color:#1A1A2E">${m.name} ${i===0?`<span style="font-size:11px;color:${T[m.typeKey].color};font-weight:600">(ë‚˜)</span>`:""}</div>
            <div style="font-size:12px;color:#9CA3AF">${T[m.typeKey].name} Â· ${m.se}/${m.pt}</div>
          </div>
          ${i>0?`<button onclick="removeMember(${i})" style="background:none;border:none;cursor:pointer;font-size:16px;color:#D1D5DB;padding:4px">âœ•</button>`:""}
        </div>`).join("")}

      <!-- Add by code -->
      <div style="margin-top:16px;padding:16px;background:#F9FAFB;border-radius:14px">
        <p style="font-size:13px;font-weight:600;color:#374151;margin-bottom:8px">íŒ€ì› ì½”ë“œë¡œ ì¶”ê°€</p>
        <p style="font-size:12px;color:#9CA3AF;margin-bottom:12px">íŒ€ì›ì´ ê³µìœ í•œ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. ì—¬ëŸ¬ ì¤„ë„ ê°€ëŠ¥í•´ìš”!</p>
        <textarea id="codeInput" class="input" rows="3" placeholder="ì˜ˆì‹œ:&#10;í•œì„¤:A:-6:3:sp&#10;ë¯¼ìˆ˜:D:8:5:es" style="resize:vertical;margin-bottom:10px"></textarea>
        <button class="btn btn-primary" onclick="addByCode()" style="font-size:14px;padding:12px">+ ì½”ë“œë¡œ ì¶”ê°€</button>
      </div>
    </div>

    <!-- All types reference -->
    <div class="card">
      <div class="sec-title">ğŸ“– 4ê°€ì§€ ìœ í˜• ì°¸ê³ </div>
      ${TYPES.map(tk=>{const typ=T[tk];return`
        <div style="padding:14px;border-left:3px solid ${typ.color};margin-bottom:12px;background:#FAFAFA;border-radius:0 12px 12px 0">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px">
            <span style="font-size:22px">${typ.emoji}</span>
            <div><div style="font-size:15px;font-weight:700;color:${typ.color}">${typ.name}</div><div style="font-size:12px;color:#9CA3AF">${typ.subtitle}</div></div>
          </div>
          <div style="display:flex;flex-wrap:wrap;gap:4px;margin-top:6px">${typ.energyUp.slice(0,3).map(x=>`<span style="font-size:11px;padding:3px 7px;background:#F0FDF4;color:#166534;border-radius:6px">ğŸ”‹ ${x}</span>`).join("")}</div>
        </div>`;}).join("")}
    </div>

    <div style="height:48px"></div>
  </div>`;
}

/* ===== CHART HELPER ===== */
function makeChart(members,size){
  size=size||280;
  let dots=members.map(m=>{
    const x=((m.pt+16)/32)*100;
    const y=((m.se+16)/32)*100;
    const c=T[m.typeKey].color;
    const cx=Math.min(92,Math.max(8,x));
    const cy=Math.min(92,Math.max(8,y));
    return`<div class="dot" style="left:${cx}%;top:${cy}%"><div class="dot-circle" style="background:${c};box-shadow:0 0 0 4px ${c}33,0 2px 8px ${c}44"></div><span class="dot-name" style="color:${c}">${m.name}</span></div>`;
  }).join("");

  return`
  <div class="chart-wrap" style="max-width:${size}px">
    <div class="axis-h"></div><div class="axis-v"></div>
    <div class="chart-quad" style="top:20%;left:25%;color:#6C5CE7">ğŸ›ï¸ ì¡°ì§ ì„¤ê³„ì</div>
    <div class="chart-quad" style="top:20%;left:75%;color:#0984E3">âš™ï¸ ì‹œìŠ¤í…œ ë¹Œë”</div>
    <div class="chart-quad" style="top:80%;left:25%;color:#E17055">ğŸ¤ í”¼í”Œ ì»¤ë„¥í„°</div>
    <div class="chart-quad" style="top:80%;left:75%;color:#00B894">ğŸš€ ì‹¤í–‰ ë“œë¼ì´ë²„</div>
    <div class="chart-label" style="top:6px;left:50%;transform:translateX(-50%)">ì „ëµí˜• â†‘</div>
    <div class="chart-label" style="bottom:6px;left:50%;transform:translateX(-50%)">â†“ ì‹¤í–‰í˜•</div>
    <div class="chart-label" style="left:6px;top:50%;transform:translateY(-50%)">ê´€ê³„ â†</div>
    <div class="chart-label" style="right:6px;top:50%;transform:translateY(-50%)">â†’ ê³¼ì—…</div>
    ${dots}
  </div>`;
}

/* ===== ACTIONS ===== */
function startTest(){
  state={screen:"questions",qIdx:0,scores:{SE:0,PT:0},strengthAnswers:[],sqIdx:0,userName:"",members:[]};
  render();
}

function answerQ(val,btnIdx){
  const q=QUESTIONS[state.qIdx];
  const actualVal=q.rev?-val:val;
  state.scores[q.axis]+=actualVal;

  // highlight button
  const colors=["#6C5CE7","#A29BFE","#D1D5DB","#74B9FF","#0984E3"];
  const btns=document.querySelectorAll(".scale-btn");
  btns.forEach((b,i)=>{b.style.pointerEvents="none";});
  btns[btnIdx].style.background=colors[btnIdx];
  btns[btnIdx].style.borderColor=colors[btnIdx];
  btns[btnIdx].style.boxShadow=`0 0 0 4px ${colors[btnIdx]}33`;
  btns[btnIdx].classList.add("selected");

  setTimeout(()=>{
    if(state.qIdx+1<QUESTIONS.length){state.qIdx++;state.screen="questions";}
    else{state.sqIdx=0;state.screen="strength";}
    render();
  },450);
}

function answerSQ(val){
  state.strengthAnswers.push(val);
  if(state.sqIdx+1<STRENGTH_QUESTIONS.length){state.sqIdx++;state.screen="strength";}
  else state.screen="name";
  render();
}

function submitName(){
  const inp=$("nameInput");
  if(inp&&inp.value.trim()){state.userName=inp.value.trim();}
  else{state.userName="ë‚˜";}
  state.screen="result";
  render();
}

function copyCode(){
  const code=$("shareCode").textContent;
  navigator.clipboard.writeText(code).then(()=>{
    const btn=$("copyBtn");
    btn.textContent="âœ… ë³µì‚¬ ì™„ë£Œ!";
    setTimeout(()=>{btn.textContent="ğŸ“‹ ì½”ë“œ ë³µì‚¬";},2000);
  }).catch(()=>{
    // fallback
    const ta=document.createElement("textarea");
    ta.value=code;document.body.appendChild(ta);ta.select();document.execCommand("copy");document.body.removeChild(ta);
    const btn=$("copyBtn");btn.textContent="âœ… ë³µì‚¬ ì™„ë£Œ!";
    setTimeout(()=>{btn.textContent="ğŸ“‹ ì½”ë“œ ë³µì‚¬";},2000);
  });
}

function goTeam(){state.screen="team";render();}
function goResult(){state.screen="result";render();}
function restart(){startTest();}

function removeMember(idx){
  if(idx===0)return;
  state.members.splice(idx,1);
  render();
}

function addByCode(){
  const input=$("codeInput");
  if(!input||!input.value.trim())return;
  const lines=input.value.trim().split("\n");
  const codeMap={A:"architect",B:"builder",C:"connector",D:"driver"};
  let added=0;
  lines.forEach(line=>{
    const parts=line.trim().split(":");
    if(parts.length>=4){
      const name=parts[0].trim();
      const typeCode=parts[1].trim().toUpperCase();
      const se=parseInt(parts[2]);
      const pt=parseInt(parts[3]);
      if(name&&codeMap[typeCode]&&!isNaN(se)&&!isNaN(pt)){
        // check duplicate
        if(!state.members.find(m=>m.name===name)){
          state.members.push({name,se:Math.max(-16,Math.min(16,se)),pt:Math.max(-16,Math.min(16,pt)),typeKey:codeMap[typeCode]});
          added++;
        }
      }
    }
  });
  if(added>0){input.value="";render();}
  else{input.style.borderColor="#DC2626";setTimeout(()=>{input.style.borderColor="#E5E7EB";},2000);}
}

/* ===== INIT ===== */
render();
</script>
</body>
</html>
